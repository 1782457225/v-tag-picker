(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vtagpicker"]=e():t["vtagpicker"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="fb15")}({2350:function(t,e){function a(t,e){var a=t[1]||"",o=t[3];if(!o)return a;if(e&&"function"===typeof btoa){var i=n(o),r=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[a].concat(r).concat([i]).join("\n")}return[a].join("\n")}function n(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,"+e;return"/*# "+a+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=a(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,a){"string"===typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"===typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var r=t[o];"number"===typeof r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),e.push(r))}},e}},"38a3":function(t,e,a){"use strict";var n=a("42db"),o=a.n(n);o.a},"42db":function(t,e,a){var n=a("f963");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("499e").default;o("4e3af51b",n,!0,{sourceMap:!1,shadowMode:!1})},"499e":function(t,e,a){"use strict";function n(t,e){for(var a=[],n={},o=0;o<e.length;o++){var i=e[o],r=i[0],s=i[1],l=i[2],c=i[3],d={id:t+":"+o,css:s,media:l,sourceMap:c};n[r]?n[r].parts.push(d):a.push(n[r]={id:r,parts:[d]})}return a}a.r(e),a.d(e,"default",function(){return g});var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,d=function(){},f=null,u="data-vue-ssr-id",p="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(t,e,a,o){c=a,f=o||{};var r=n(t,e);return h(r),function(e){for(var a=[],o=0;o<r.length;o++){var s=r[o],l=i[s.id];l.refs--,a.push(l)}e?(r=n(t,e),h(r)):r=[];for(o=0;o<a.length;o++){l=a[o];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function h(t){for(var e=0;e<t.length;e++){var a=t[e],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(v(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var r=[];for(o=0;o<a.parts.length;o++)r.push(v(a.parts[o]));i[a.id]={id:a.id,refs:1,parts:r}}}}function m(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function v(t){var e,a,n=document.querySelector("style["+u+'~="'+t.id+'"]');if(n){if(c)return d;n.parentNode.removeChild(n)}if(p){var o=l++;n=s||(s=m()),e=y.bind(null,n,o,!1),a=y.bind(null,n,o,!0)}else n=m(),e=x.bind(null,n),a=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}var b=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}();function y(t,e,a,n){var o=a?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var i=document.createTextNode(o),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(i,r[e]):t.appendChild(i)}}function x(t,e){var a=e.css,n=e.media,o=e.sourceMap;if(n&&t.setAttribute("media",n),f.ssrId&&t.setAttribute(u,e.id),o&&(a+="\n/*# sourceURL="+o.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}},ac8e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".vtag-item[data-v-21627232]{display:inline-block;padding:5px 15px;border-radius:3px;font-size:14px;white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vtag-item-default[data-v-21627232]{background:#efefef;color:#444}.vtag-item-light[data-v-21627232]{color:#fff;background:#7c6cd9}",""])},ed15:function(t,e,a){var n=a("ac8e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("499e").default;o("7b81b77f",n,!0,{sourceMap:!1,shadowMode:!1})},f47d:function(t,e,a){"use strict";var n=a("ed15"),o=a.n(n);o.a},f963:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'@-webkit-keyframes grow-data-v-b8ea0c5a{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes grow-data-v-b8ea0c5a{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}.vtag-wrap[data-v-b8ea0c5a]{position:fixed;top:0;bottom:0;left:0;right:0;background:#fff}.vtag-inner[data-v-b8ea0c5a]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vtag-top[data-v-b8ea0c5a]{height:50px;-webkit-box-sizing:border-box;box-sizing:border-box;background:#f2f2f2;font-size:0;margin-bottom:15px;position:relative}.vtag-top__empty[data-v-b8ea0c5a]{height:0}.vtag-top__content[data-v-b8ea0c5a]{padding:10px 15px;overflow:auto;-webkit-overflow-scrolling:touch;white-space:nowrap;position:relative;height:100%}.vtag-top__content[data-v-b8ea0c5a],.vtag-top__right[data-v-b8ea0c5a]{-webkit-box-sizing:border-box;box-sizing:border-box}.vtag-top__right[data-v-b8ea0c5a]{text-align:right;padding-right:15px;width:94px;position:absolute;right:0;top:0;bottom:0;background:-webkit-gradient(linear,left top,right top,from(hsla(0,0%,96.1%,0)),to(#f5f5f5));background:linear-gradient(90deg,hsla(0,0%,96.1%,0),#f5f5f5)}.vtag-top__right[data-v-b8ea0c5a]:after{content:"";height:100%}.vtag-top__num[data-v-b8ea0c5a],.vtag-top__right[data-v-b8ea0c5a]:after{display:inline-block;vertical-align:middle}.vtag-top__num[data-v-b8ea0c5a]{font-size:16px;color:#fff;height:32px;line-height:32px;padding:0 6px;border-radius:16px;background:#000}.vtag-top__item[data-v-b8ea0c5a]{position:absolute;left:15px}.vtag-container[data-v-b8ea0c5a]{text-align:center;font-size:0;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:scroll;margin:.18rem 0 .31rem;max-height:6.4rem;height:auto}.vtag-container[data-v-b8ea0c5a]:before{top:0}.vtag-container[data-v-b8ea0c5a]:after,.vtag-container[data-v-b8ea0c5a]:before{content:"";position:absolute;left:0;right:0;height:30px;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(hsla(0,0%,100%,0)));background:linear-gradient(180deg,#fff,hsla(0,0%,100%,0));z-index:2}.vtag-container[data-v-b8ea0c5a]:after{bottom:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.vtag-container__content[data-v-b8ea0c5a]{min-width:100px;overflow:auto;height:100%;max-height:6.4rem;padding:.5rem;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch}.vtag-container__item[data-v-b8ea0c5a]{display:inline-block;margin:0 .32rem .32rem 0;position:relative}.vtag-container__item.hide[data-v-b8ea0c5a]{margin:0;padding:0;width:0!important;height:0!important}.vtag-container__item.animate[data-v-b8ea0c5a]{-webkit-animation:grow-data-v-b8ea0c5a linear alternate;animation:grow-data-v-b8ea0c5a linear alternate}',""])},fb15:function(t,e,a){"use strict";var n;(a.r(e),"undefined"!==typeof window)&&((n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(a.p=n[1]));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"vtag-wrap",staticClass:"vtag-wrap",style:{"z-index":t.zIndex}},[a("div",{ref:"top",staticClass:"vtag-top",class:{"vtag-top__empty":t.totalSelection&&0===t.totalSelection.length}},[a("div",{ref:"top-content",staticClass:"vtag-top__content",style:t.vtagTopContentStyle,on:{click:function(e){t.handleCancelVtag(e)}}},[t._l(t.selection,function(e,n){return a("VTagPickerItem",{key:n,staticClass:"vtag-top__item",style:{transition:"all "+t.animationDuration/1e3+"s"},attrs:{type:"light",name:e.name,totalSelectionKey:e[t.onlyKey]}})}),a("div",{staticClass:"vtag-top-content__width",style:{width:t.vtopContentWidth,height:"1px"}})],2),t.showTagNum?a("div",{staticClass:"vtag-top__right"},[a("div",{staticClass:"vtag-top__num"},[t._v(t._s("+"+t.totalSelection.length))])]):t._e()]),t._t("top"),a("div",{ref:"container",staticClass:"vtag-container"},[a("div",{staticClass:"vtag-container__content"},t._l(t.totalData,function(e,n){return a("VTagPickerItem",{key:n,staticClass:"vtag-container__item",style:{transition:"all "+t.animationDuration/1e3+"s",animationDuration:t.animationDuration/1e3+"s"},attrs:{type:t.selection.some(function(a){return a[t.onlyKey]===e[t.onlyKey]})?"light":"default",name:e.name,totalSelectionKey:e[t.onlyKey]},on:{click:function(a){t.handleClickVtag(a,e)}}})}),1)]),a("div",{ref:"vtag-footer",staticClass:"vtag-footer"},[t._t("footer")],2)],2)},i=[];const r=t=>{return new Promise(e=>{setTimeout(()=>{e()},t)})};var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vtag-item",class:["vtag-item-"+t.type],attrs:{"totalSelection-key":t.totalSelectionKey},on:{click:t.handleClickVtag}},[t._v("\n  "+t._s(t.name)+"\n")])},l=[],c={name:"v-tag-picker-item",props:{totalSelectionKey:{type:String},name:{type:String,required:!0},type:{type:String,default:"default"}},data(){return{}},methods:{handleClickVtag(t){this.$emit("click",t)}}},d=c;a("f47d");function f(t,e,a,n,o,i,r,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:c}}var u=f(d,s,l,!1,null,"21627232",null),p=u.exports,g={name:"v-tag-picker",components:{VTagPickerItem:p},props:{zIndex:Number,totalData:{type:Array,default:()=>[]},selectedData:{type:Array,default:()=>[]},animationDuration:{type:Number,default:500},onlyKey:{type:String,default:"name"},appendToBody:{type:Boolean,default:!1}},data(){return{vtagTopContentStyle:{},showTagNum:!1,selection:[],domQueue:[],animating:!1,totalSelection:[],vtopContentWidth:"100%",topVtagItemCache:null}},watch:{selectedData:{handler(t){this.selection=JSON.parse(JSON.stringify(t)),this.totalSelection=JSON.parse(JSON.stringify(t)),this.$nextTick(()=>{this.computedTagNumShow(),this.initTagPosition()})},immediate:!0},totalSelection(t){this.$emit("change",JSON.parse(JSON.stringify(t)))},totalData:{handler(t){this.$nextTick(()=>{this.computedContainerHeight()})},immediate:!0}},methods:{handleCancelVtag(t){let e=t.target,a=e.getAttribute("totalSelection-key");a&&this.cancelTag(a)},cancelTag(t){let e=this.$refs["top-content"],a=this.$refs["container"],n=e.querySelector(`[totalSelection-key="${t}"]`),o=a.querySelector(`[totalSelection-key="${t}"]`),i=n.offsetWidth;if(n.classList.contains("vtag-item-default")||!n.classList.contains("vtag-item"))return;n.classList.remove("vtag-item-light"),n.classList.add("vtag-item-default");let r=this.totalSelection.findIndex(e=>e[this.onlyKey]===t);this.totalSelection.splice(r,1),n.innerHTML="";let s=n;while(s.nextElementSibling&&s.nextElementSibling.classList.contains("vtag-item")){let t=s.nextElementSibling,e=Number(t.getAttribute("transform-x"))-i-15;t.setAttribute("transform-x",e),t.style.transform=`translate(${e}px, 0)`,s=t}n.parentNode.removeChild(n),o.classList.remove("vtag-item-light"),o.classList.add("vtag-item-default"),this.computedTagNumShow()},handleClickVtag(t,e){let a=t.target,n=a.getAttribute("totalSelection-key"),o=this.$refs["top-content"],i=o.querySelector(`[totalSelection-key="${n}"]`);if(a.classList.contains("vtag-item-light")){if(!i)return;this.cancelTag(n)}else a.classList.add("vtag-item-light","animate"),this.totalSelection.push(e),this.domQueue.push({event:t,data:e}),setTimeout(()=>{if(a.classList.remove("animate"),this.animating)return;let t=this.domQueue.shift();this.moveTag(t.event,t.data)},this.animationDuration)},async moveTag(t,e){this.animating=!0;let a=t.target,n=t.target.cloneNode(!0),o=a.getBoundingClientRect(),i=this.$refs["vtag-wrap"],s=this.$refs["top-content"];s.scrollLeft=0,n.style.position="fixed",n.style.left=`${o.x}px`,n.style.top=`${o.y}px`,i.appendChild(n),await r(10),this.moveExist(t),n.style.transform=`translate(${15-o.x}px,${10-o.y}px)`,setTimeout(()=>{if(n.parentNode.removeChild(n),this.topPrepend(t,e),this.animating=!1,this.computedTagNumShow(),this.domQueue.length){let t=this.domQueue.shift();this.moveTag(t.event,t.data)}},this.animationDuration)},moveExist(t){let e=t.target,a=e.offsetWidth,n=this.$refs["top-content"].querySelectorAll(".vtag-item");n.forEach(t=>{let e=Number(t.getAttribute("transform-x"))+a+15;t.setAttribute("transform-x",e),t.style.transform=`translate(${e}px, 0)`})},topPrepend(t,e){let a=this.$refs["top-content"];if(this.selection.length){let t=this.topVtagItemCache.cloneNode(!0);t.setAttribute("totalSelection-key",e[this.onlyKey]),t.innerHTML=e.name,a.firstChild&&a.insertBefore(t,a.firstChild)}else this.selection.unshift(e),this.$nextTick(()=>{a.querySelector(".vtag-item").setAttribute("totalSelection-key",e[this.onlyKey]),this.topVtagItemCache=a.querySelector(".vtag-item").cloneNode(!0)})},initTagPosition(){let t=this.$refs["top-content"].querySelectorAll(".vtag-item");t.length&&(this.topVtagItemCache=t[0].cloneNode(!0)),t.forEach((e,a)=>{e.setAttribute("transform-x",0),e.style.transform="translate(0px, 0)",e.style.left=0===a?"15px":`${t[a-1].offsetLeft+t[a-1].offsetWidth+15}px`})},computedTagNumShow(){const t=this.$refs["top-content"];if(t.scrollWidth===t.clientWidth)this.showTagNum=!1,this.$set(this.vtagTopContentStyle,"width","100%"),this.$set(this.vtagTopContentStyle,"paddingRight","15px");else{this.showTagNum=!0;let t=this.$refs["top-content"],e=t.querySelectorAll(".vtag-item"),a=e[e.length-1],n=a.getBoundingClientRect();this.$set(this.vtagTopContentStyle,"paddingRight","94px"),this.vtopContentWidth=`${a.offsetLeft+Number(a.getAttribute("transform-x"))+n.width+Number(t.style.paddingLeft)+94}px`}},computedContainerHeight(){const t=this.$refs["vtag-wrap"],e=this.$refs.container,a=this.$refs["vtag-footer"];e.style.height=`${t.offsetHeight-e.offsetTop-(a.offsetHeight||0)}px`},addForEachToNodeList(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var a=0;a<this.length;a++)t.call(e,this[a],a,this)})}},mounted(){this.addForEachToNodeList(),this.appendToBody&&document.body.appendChild(this.$refs["vtag-wrap"])},beforeDestroy(){}},h=g,m=(a("38a3"),f(h,o,i,!1,null,"b8ea0c5a",null)),v=m.exports;v.install=function(t){t.component(v.name,v)};var b=v;const y=[b],x=function(t){x.installed||y.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&x(window.Vue);var w={install:x};a.d(e,"vTagPicker",function(){return b});e["default"]=w}})});
//# sourceMappingURL=vtagpicker.umd.min.js.map